
$.ajax({
    type: "GET",
    url: "https://www.myhomesfy.com/api/leads/projectdata/1260"
}).done(function (data) {
    if ("result" in data) {
         phone_no = data.result.phone;
         whatsapp_url = data.result.wp_links;
         window.projectname = data.result.project_name;
         window.city = data.result.city;
         window.RegNo = data.result.reg_no;
        $(".phone_url").attr("href", "tel:" + phone_no + "");
        $(".whatsapp_url").attr("href", whatsapp_url + "!I want to know about " + data.result.project_name + ".");
        $(".phone_no").html(phone_no)
    }
}).fail(function () {
    var whatsapp_url = "https://api.whatsapp.com/send?phone=917304412403&text=Hi!"
    $(".whatsapp_url").attr("href", whatsapp_url);
    $(".phone_url").attr("href", "tel:" + 918045936039 + "");
    $(".phone_no").html("918045936039")
});
var utmsource, utmcampaign, utmmedium, utmterm, utmcontent;
var param_region_id = window.RegNo;
var param_nationality = 1;
var queryForm = function (settings) {
    var reset = settings && settings.reset ? settings.reset : !1;
    var self = window.location.toString();
    var querystring = self.split("?");
    if (querystring.length > 1) {
        var pairs = querystring[1].split("&");
        for (i in pairs) {
            var keyval = pairs[i].split("=");
            if (reset || sessionStorage.getItem(keyval[0]) === null) {
                sessionStorage.setItem(keyval[0], keyval[1])
            }
            if (keyval[0] == "utm_source")
                utmsource = keyval[1];
            if (keyval[0] == "utm_medium")
                utmmedium = keyval[1];
            if (keyval[0] == "utm_campaign")
                utmcampaign = keyval[1];
            if (keyval[0] == "utm_content")
                utmcontent = keyval[1];
            if (keyval[0] == "utm_term")
                utmterm = keyval[1]
            if (keyval[0] == "p_nationality")
                param_nationality = keyval[1]
            if (keyval[0] == "p_regionid") {
                param_region_id = keyval[1];
                $.ajax({
                    type: "GET",
                    url: "https://myhomesfy.com/api/leads/regiondata/" + param_region_id
                }).done(function (data) {
                    if ("result" in data) {

                        phone_no = data['result']['phone'];
                        whatsapp_url = data['result']['wp_links'];
                        $(".phone_url").attr("href", "tel:" + phone_no + "");
                        $(".whatsapp_url").attr("href", whatsapp_url + "!I want to know about Lodha Quality Homes Majiwada project.");
                        $(".phone_no").html(phone_no);
                    }
                });
            }

        }
    }
    var hiddenFields = document.querySelectorAll("input[type=hidden]");
    for (var i = 0; i < hiddenFields.length; i++) {
        var param = sessionStorage.getItem(hiddenFields[i].name);
        if (param) document.getElementById(hiddenFields[i].name).value = param
    }
}

queryForm();
$(document).ready(function () {
    var Ipaddress;
    var browser;
    var device;
    if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/Windows Phone/i)) {
        device = "Mobile";
    } else if (navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i)) {
        device = "Tablet";
    } else if (navigator.userAgent.match(/BlackBerry/i)) {
        device = "Blackberry";
    } else {
        device = "Desktop";
    }

    $.getJSON("https://jsonip.com?callback=?", function (data) {
        Ipaddress = data.ip;
    });

    if ((navigator.userAgent.indexOf("Opera") || navigator.userAgent.indexOf('OPR')) != -1) {
        browser = "Opera";
    } else if (navigator.userAgent.indexOf("Chrome") != -1) {
        browser = "Chrome";
    } else if (navigator.userAgent.indexOf("Safari") != -1) {
        browser = "Safari";
    } else if (navigator.userAgent.indexOf("Firefox") != -1) {
        browser = "Firefox";
    } else if ((navigator.userAgent.indexOf("MSIE") != -1) || (!!document.documentMode == true)) //IF IE > 10
    {
        browser = "MSIE";
    }
    $('#dropAnEnquiry').on("submit", function () {
        debugger;
        var name = $('#dropAnEnquiry_name').val();
        var email = $('#dropAnEnquiry_email').val();
        var number = $('#dropAnEnquiry_number').val();
        var country_code = $('#dropAnEnquiry_countrycode').val();
        var message=$('input[name="csitevisit"]:checked').val();
        saveLead(name, email, number, country_code, 'top_enquire_form',message);
        return !1
    })
    $('#HomemeetingForm').on("submit", function () {
        debugger
        var name = $('#Homemeetingname').val();
        var email = "Noe email";
        var number = $('#Homemeetingnumber').val();
        var country_code = $('#Homemeeting_CountryCode').val();
        saveLead(name, email, number, country_code,' homemeeting_overview_homepage');
        return !1
    })
    $('#enquire_now').on("submit", function () {
        debugger
        var name = $('#enquirenow_name').val();
        var email = $('#enquirenow_email').val();
        var number = $('#enquirenow_number').val();
        var country_code = $('#enquirenow_countrycode').val();
        var message='No message';
        saveLead(name, email, number, country_code,'enquire_overview_homepage',message);
        return !1
    })
    $('#ContactUs').on("submit", function () {
        debugger
        var name = $('#ContactUs_name').val();
        var email = $('#ContactUs_email').val();
        var number = $('#ContactUs_number').val();
        var country_code = $('#ContactUs_CountryCode').val();
        var message='No message';
        saveLead(name, email, number, country_code,' Complete_Costing_Details',message);
        return !1
    })
     $('#sform').on("submit", function () {
        debugger;
        var name = $('#sname').val();
        var email = $('#semail').val();
        var number = $('#snumber').val();
        var country_code = $('#scountrycode').val();
         var message=$('input[name="location"]:checked').val();
        saveLead(name, email, number, country_code,'enquire_overview_homepage',message);
        return !1
    })
    $('#PopUpForm').on("submit", function () {
        debugger;
        var name = $('#PopUpname').val();
        var email = "Noe email";
        var number = $('#PopUpnumber').val();
        var country_code = $('#PopUp_CountryCode').val();
        saveLead(name, email, number, country_code,'Onload_Popup_overview_homepage');
        return !1
    })

    function saveLead(name, email, number, country_code, pref,message) {
        debugger
        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if (name.length == 0) {
            alert('Please Enter Your Sweet Name');
            return !1
        }
        else {
            debugger;
            var obj = {};
            obj.p_username = name;
            obj.p_mobilenumber = number;
            obj.p_email = email;
            obj.p_countrycode = country_code;
            obj.p_msg=message;
            obj.p_pref = pref;
            obj.p_leadtype = window.projectname;
            obj.p_launchname = "";
            obj.p_source = "website";
            obj.p_city = window.city;
            obj.p_nationality = param_nationality;
            obj.p_regionid = param_region_id;
            obj.p_utmsource = utmsource;
            obj.p_utmmedium = utmmedium;
            obj.p_utmcampaign = utmcampaign;
            obj.p_utmcontent = utmcontent;
            obj.p_utmterm = utmterm;
            obj.p_ipaddress = Ipaddress;
            obj.p_userbrowser = browser;
            obj.p_useragent = device;
            if (pref == 'priceplanoffer_overview_homepage') {
                SendPrice(obj);
            }
            else
                SendLead(obj);
        }
        return !0
    }
})
var SendLead = function (obj) {
    debugger;
    alert("welcome")
    $.post("https://www.myhomesfy.com/api/leads", obj, function (data) {
        alert("Thank You!");
        window.location.href = "assest/thankyou.html";
        return !0
    })
}



window.$zopim || (function (g, a) {
    var f = $zopim = function (d) {
        f._.push(d)
    },
        b = f.s = g.createElement(a),
        c = g.getElementsByTagName(a)[0];
    f.set = function (d) {
        f.set._.push(d)
    };
    f._ = [];
    f.set._ = [];
    b.async = !0;
    b.setAttribute("charset", "utf-8");
    b.src = "//v2.zopim.com/?2F4uasrDz8AwB7cxrCz3igHZtZovK0w4";
    f.t = +new Date;
    b.type = "text/javascript";
    c.parentNode.insertBefore(b, c)
})(document, "script");
$zopim(function () {
    $zopim.livechat.button.setOffsetVerticalMobile(55);
    $zopim.livechat.button.setOffsetHorizontalMobile(10)
})




